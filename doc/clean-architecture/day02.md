```
+++
author = "kmplex"
title = "만들면서 배우는 클린아키텍처 2일차"
date = "2022-10-26"
description = "만들면서 배우는 클린 아키텍처 4장"
series = ["clean architecture"]
categories = ["study","ddd"]
+++
```

## 유스케이스 구현하기

#### 유스케이스 둘러보기

일반적으로 유스케이스는 다음과 같은 단계를 따른다.

```text
01. 입력을 받는다.
02. 비즈니스 규칙을 검증한다.
03. 모델 상태를 조작한다.
04. 출력을 반환한다.
```

유스케이스는 인커밍 어댑터로부터 입력을 받는다.

> 유스케이스 코드가 도메인 로직에만 신경 써야하고, 입력 유효성 검증으로 오염되면 안되기때문에 입력 유효성 검증은 다른 곳에서 처리되어야한다.

다만, 유스케이스는 비즈니스 규칙을 검증할 책임이 있으며, 도메인 엔티티와 이 책임을 공유한다. 

비즈니스 규칙을 충족하면, 유스케이스는 입력을 기반으로 어떤 방법으로든 모델의 상태를 변경한다.
필요에 따라 유스케이스는 다른 아웃고잉 어댑터를 호출 할 수 있으며, 해당 출력값을 유스케이스를 호출한 어댑터로 반환한다.

`개인적인 생각`

port adapter 로 너무 인터페이스가 많아지는 느낌. 
조금 더 느슨하게 구조를 가져가도 좋을거 같다는 생각이 든다. 

> 어떤 의도 / 개념에서 해당 구조를 가져가는지만 이해하고 넘어가도 좋을거 같음.

#### 입력 유효성 검증 

유스케이스 클래스가 아니라면, 어디에서 입력 유효성을 검증해야할까? 

`입력 모델`이 이 문제를 다루도록 해보자.  

> port 로 데이터를 넘길때, Dto 객체를 만들어서 그 안에서 값에 대한 유효성 검증을 하면 된다.

spring 에서는 valid 라는 annotation 으로 입력 유효성 검증을 할 수 있음.

#### 생성자의 힘 

builder 를 굳이 쓰지 않아도 된다는 내용.

#### 유스케이스마다 다른 입력 모델 

add / update 시 데이터가 유사하기 때문에 입력 모델을 동일하게 가져갈 수 있으나,  엄연히 다른 유스케이스로 서로 다른 유효성 검사를 필요로하게 된다.
불필요한 결합이 생기기 때문에 불편하더라도, 다른 입력모델을 사용해야한다. 

#### 비즈니스 규칙 검증하기



